(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const $=(t,e,n)=>()=>{O(t,e,n)},i=(t,e="value")=>{X(t)||a(t,e,"an instance of HTMLElement")},T=t=>S(t)==="",I=t=>typeof t=="string",k=t=>I(t)?t:"",S=t=>k(t).trim(),x=t=>y(t).slice(8,-1),y=t=>Object.prototype.toString.call(t),B=t=>(c(t,"raw"),JSON.parse(t)),H=(t,e=null)=>{try{return B(t)}catch(n){return console.error("parseJSONWithFallback: Failed to parse JSON. Raw value:",t,n),e}},f=(t,e="value")=>{yt(t)||a(t,e,"an instance of Node")},R=(t,e="value")=>{nt(t,e)||a(t,e,"an HTMLElement that supports textContent")},P=(t,e)=>{f(t,"first argument - ParentNode"),f(e,"second argument - ChildNode");const n=t.contains(e);return n||a(e,`${l(t)}.contains(${l(e)})`,`a child element contained in ${l(t)}`),n},U=(t,e)=>{f(t,"first argument"),c(e,"second argument");const n=t.closest(e);return j(n,`${l(t)}.closest result`,`an Element matching selector "${e}"`),n},h=t=>{if(c(t),T(t))throw new SyntaxError("Class name cannot be empty.");if(/\s/.test(t))throw new SyntaxError(`Class name must not contain spaces: "${t}"`);if(!/^[a-zA-Z_][\w-]*$/.test(t))throw new SyntaxError(`Invalid class name: "${t}". A valid class name must start with a letter or underscore, and may only contain letters, digits, hyphens (-), and underscores (_).`)},u=(t,e="value")=>{gt(t)||a(t,e,"a DOM element of type <input>")},C=(t,e="value")=>{at(t)||a(t,e,"a DOM element of type <ul>")},E=(t,e="value")=>{ct(t)||a(t,e,"a DOM element of type <li>")},J=(t,e="value")=>{Tt(t)||a(t,e,"a DOM element of type <button>")},K=(t,e="value")=>{Et(t)||a(t,e,"a DOM element of type <div>")},v=(t,e="value")=>{Lt(t)||a(t,e,"an instance of Event")},F=t=>{if(c(t),T(t))throw new SyntaxError("Selector cannot be an empty string.");try{document.createElement("div").querySelector(t)}catch(e){throw new SyntaxError(`Invalid CSS selector: "${t}". ${e.message}`)}},W=t=>{if(F(t),!t.startsWith("."))throw new SyntaxError('Selector must start with "."')},c=(t,e="value")=>{I(t)||a(t,e,"string")},j=(t,e="value",n="a non-null and non-undefined value")=>{t==null&&a(t,e,n)},a=(t,e,n)=>{const o=y(t),s=x(t);throw new TypeError(`Expected ${e} to be ${n}, but received ${o} of type ${s}`)},q=(t,e="localStorage")=>{t!==globalThis.localStorage&&a(t,e,"globalThis.localStorage")},G=t=>{if(!(()=>{try{const n="__test__";return t.setItem(n,"1"),t.removeItem(n),!0}catch{return!1}})())throw new Error("globalThis.localStorage is present but not usable at runtime — possibly due to browser restrictions (e.g., Safari private mode, quota exceeded, or disabled access).")},z=t=>{q(t),G(t)},d=t=>{c(t);const e=document.querySelector(t);return i(e),e},l=t=>{const e=p(t),n=t.id?`#${t.id}`:"",o=t.classList.length?"."+Array.from(t.classList).join("."):"";return`<${e}${n}${o}>`},X=t=>t instanceof HTMLElement,Y=t=>Q.has(p(t)),Z=t=>tt.has(p(t)),Q=new Set(["VIDEO","AUDIO","PICTURE","CANVAS"]),tt=new Set(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"]),_=(t,e)=>{i(t,"first argument"),c(e,"second argument"),t.className=e},et=(t,e)=>{i(t,"first argument"),c(e,"second argument"),t.classList.toggle(e)},m=(t,e)=>{R(t,"first argument"),c(e,"second argument"),t.textContent=e},nt=(t,e="value")=>(i(t,e),!(Z(t)||Y(t))),p=t=>(i(t,"first argument"),t.tagName),ot=(t,e)=>U(t,e),st=(t,e)=>P(t,e),rt=()=>document.createElement("li"),at=t=>t instanceof HTMLUListElement,ct=t=>t instanceof HTMLLIElement,M=(t,e)=>{C(t,"first argument"),E(e,"second argument"),t.appendChild(e)},it=(t,e)=>{E(t,"first argument"),m(t,e)},lt=(t,e)=>{E(t,"first argument"),c(e,"second argument"),_(t,e)},ut=t=>{u(t),t.value=""},dt=t=>{u(t),t.value="",t.focus()},mt=t=>(u(t),t.value),w=t=>S(mt(t)),gt=t=>t instanceof HTMLInputElement,ft=()=>document.createElement("span"),Tt=t=>t instanceof HTMLButtonElement,Et=t=>t instanceof HTMLDivElement,pt=t=>(W(t),t),Lt=t=>t instanceof Event,It=t=>(v(t),t.target),St=t=>(v(t),t.currentTarget),yt=t=>t instanceof Node,ht=t=>{const{target:e,currentTarget:n,className:o}=Vt(t);st(n,e),Ot(e,o)},Ct=t=>{const e=t.target;if(!e.classList.contains("todo__item--remove"))return;const n=e.closest(".todo__item");n&&n.parentElement&&n.parentElement.removeChild(n);const o=V(".todo__list"),s=A(o);D(s)},vt=t=>()=>{Dt(t)},_t=(t,e,n)=>o=>{o.key==="Enter"&&O(t,e,n)},Mt=(t,e)=>{bt(t,e),ut(e)},wt=t=>{const e=w(t);return!T(e)},bt=(t,e)=>{const n=w(e),o=b(n);M(t,o);const s=A(t);D(s)},Ot=(t,e)=>{et(t,e)},b=(t,e="todo__item")=>{const n=rt();lt(n,e),it(n,t);const o=At();return n.appendChild(o),n},At=()=>{const t=ft();return _(t,Ft()),m(t,"×"),t.setAttribute("aria-label","Delete task"),t.setAttribute("role","button"),t},Vt=t=>({selector:L(),className:Kt(),target:ot(It(t),L()),currentTarget:St(t)}),Nt=(t,e)=>m(t,e),Dt=t=>m(t,""),O=(t,e,n)=>{wt(t)?Mt(e,t):Nt(n,"Task cannot be empty"),dt(t)},A=t=>Array.from(t.children).map(e=>{const n=e.firstChild;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.textContent.trim():""}),$t={todoButton:".todo__btn",todoInput:".todo__input",todoList:".todo__list",todoValidMessage:".todo__error"},kt=t=>{const e=d(t);return J(e),e},xt=t=>{const e=d(t);return u(e),e},V=t=>{const e=d(t);return C(e),e},Bt=t=>{const e=d(t);return K(e),e},{todoButton:Ht,todoInput:Rt,todoList:Pt,todoValidMessage:Ut}=$t,Jt=()=>({todoButton:kt(Ht),todoInput:xt(Rt),todoList:V(Pt),todoValidMessage:Bt(Ut)}),L=()=>pt(".todo__item"),Kt=()=>{const t="todo__item--checked";return h(t),t},Ft=()=>{const t="todo__item--remove";return h(t),t},Wt=(t,e)=>(z(t),c(e,"key"),t.getItem(e)),jt=(t,e,n)=>{const o=Wt(t,e);return H(o,n)},N={todo:"todoList"},qt=()=>{const t=[],e=jt(localStorage,N.todo,t);return Array.isArray(e)?e:t},D=t=>{try{localStorage.setItem(N.todo,JSON.stringify(t))}catch(e){console.error("Failed to save todos:",e)}},Gt=()=>{const{todoButton:t,todoInput:e,todoList:n,todoValidMessage:o}=Jt();qt().forEach(r=>M(n,b(r))),t.addEventListener("click",$(e,n,o)),n.addEventListener("click",r=>{ht(r),Ct(r)}),e.addEventListener("keydown",_t(e,n,o)),e.addEventListener("input",vt(o))};window.addEventListener("DOMContentLoaded",Gt);
