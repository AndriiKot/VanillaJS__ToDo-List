(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const q=(t,e,n)=>()=>{k(t,e,n)},C=(t,e="value")=>{dt(t)||c(t,e,"an instance of HTMLElement")},I=t=>M(t)==="",O=t=>typeof t=="string",X=t=>O(t)?t:"",M=t=>X(t).trim(),Y=t=>y(t).slice(8,-1),y=t=>Object.prototype.toString.call(t),Q=(t,e=80)=>{let n;if(typeof t=="bigint")n=t.toString()+"n";else if(t instanceof WeakMap||t instanceof WeakSet||t instanceof Map||t instanceof Set||t instanceof Promise)n=String(t);else try{n=JSON.stringify(t)}catch{n=String(t)}return n===void 0&&(n=String(t)),n.length>e?n.slice(0,e)+"…":n},z=t=>(d(t,"raw"),JSON.parse(t)),Z=(t,e=null)=>{try{return z(t)}catch(n){return console.error("parseJSONWithFallback: Failed to parse JSON. Raw value:",t,n),e}},tt=t=>t==null,l=(t,e="value")=>{Et(t)||c(t,e,"an instance of Element")};function et(t,e){if(t=u(t),e=u(e),!Ft(t,e))throw new Error(`Cannot nest <${e}> inside <${t}> — this is prohibited by the rules.`)}const R=(t,e="value")=>{gt(t,e)||c(t,e,"an HTMLElement that supports textContent")},i=t=>{if(d(t,"HTML class name"),I(t))throw new SyntaxError("Class name cannot be empty.");if(/\s/.test(t))throw new SyntaxError(`Class name must not contain spaces: "${t}"`);if(!/^-?[_\p{L}][_\p{L}\p{N}-]*$/u.test(t))throw new SyntaxError(`Invalid class name: "${t}". A valid class name must be a non-empty string without spaces, start with a letter, underscore (_), or hyphen (-), and contain only letters, digits, hyphens (-), and underscores (_). Examples: "header", "_hidden", "-dark-theme", "menu_item-1", "привет", "按钮".`)},N=(t,e)=>{l(t,"first argument"),rt(e)},nt=t=>{if(!Ht(t))throw new Error(`"${t}" is not a valid ARIA role for a DOM element (HTMLElement, SVGElement, or MathMLElement)`)},E=(t,e="value")=>{yt(t)||c(t,e,"a DOM element of type <input>")},b=(t,e="value")=>{wt(t)||c(t,e,"a DOM element of type <ul>")},D=(t,e="value")=>{ht(t)||c(t,e,"a DOM element of type <li>")},ot=(t,e="value")=>{Rt(t)||c(t,e,"a DOM element of type <button>")},st=(t,e="value")=>{Nt(t)||c(t,e,"a DOM element of type <div>")},P=(t,e="value")=>{vt(t)||c(t,e,"an instance of Event")},rt=t=>{if(d(t),I(t))throw new SyntaxError("CSS Selector cannot be an empty string.");try{document.createElement("div").querySelector(t)}catch(e){throw new SyntaxError(`Invalid CSS selector: "${t}". ${e.message}`)}},d=(t,e="value")=>{O(t)||c(t,e,"string")},B=(t,e)=>{const n=e||"value";if(d(t,n),t.trim()==="")throw new Error(`${n} must be a non-empty string, but an empty string was provided`)},c=(t,e,n)=>{const s=y(t),o=Y(t),r=Q(t);throw new TypeError(`Expected ${e} to be ${n}, but received ${s} of type ${o} with value ${r}`)},at=(t,e="localStorage")=>{t!==globalThis.localStorage&&c(t,e,"globalThis.localStorage")},ct=t=>{if(!(()=>{try{const n="__test__";return t.setItem(n,"1"),t.removeItem(n),!0}catch{return!1}})())throw new Error("globalThis.localStorage is present but not usable at runtime — possibly due to browser restrictions (e.g., Safari private mode, quota exceeded, or disabled access).")},it=t=>{at(t),ct(t)},T=t=>{d(t);const e=document.querySelector(t);return l(e),e},lt=(t,e)=>{l(t,"First argument 'root' must be a valid DOM Element."),i(e);const n=t.getElementsByClassName(e)[0];if(!n)throw new TypeError(`No element found with class name '${e}'`);return n},L=(t,e)=>(et(t,e),t.appendChild(e)),dt=t=>t instanceof HTMLElement,ut=t=>_t.has(u(t)),mt=t=>Vt.has(u(t)),Et=t=>t instanceof Element,F=(t,e)=>{l(t,"first argument"),i(e),t.className=e},Tt=(t,e)=>{l(t,"first argument"),i(e),t.classList.toggle(e)},St=(t,e)=>{l(t,"first argument"),i(e),t.classList.add(e)},S=(t,e)=>{R(t,"first argument"),d(e,"second argument"),t.textContent=e},gt=(t,e="value")=>(C(t,e),!(mt(t)||ut(t))),ft=t=>(R(t),t.textContent),u=t=>(C(t,"first argument"),t.tagName),Lt=(t,e)=>(N(t,e),t.closest(e)),f=(t,e)=>{const n=v(e);return N(t,n),t.closest(n)},It=(t,e)=>{l(t,"first argument"),nt(e),t.setAttribute("role",e)},pt=(t,e)=>{l(t,"First argument of setAriaLabel (DOM element: HTMLElement, SVGElement, MathMLElement)"),B(e,"Second argument of setAriaLabel (aria-label value, must be a non-empty string)"),t.setAttribute("aria-label",e)},At=()=>document.createElement("li"),wt=t=>t instanceof HTMLUListElement,ht=t=>t instanceof HTMLLIElement,U=(t,e)=>{b(t,"first argument"),D(e,"second argument"),L(t,e)},Ct=(t,e)=>{D(t,"first argument"),i(e),F(t,e)},Ot=t=>{E(t),t.value=""},H=t=>{E(t),t.value="",t.focus()},Mt=t=>(E(t),t.value),_=t=>M(Mt(t)),yt=t=>t instanceof HTMLInputElement,V=()=>document.createElement("span"),Rt=t=>t instanceof HTMLButtonElement,Nt=t=>t instanceof HTMLDivElement,v=t=>(i(t),`.${t}`),h={UL:new Set(["Flow content","Metadata content"]),OL:new Set(["Flow content","Metadata content"]),DL:new Set(["Flow content"]),SELECT:new Set(["Phrasing content","Metadata content"]),TABLE:new Set(["Flow content"]),THEAD:new Set(["Flow content"]),TBODY:new Set(["Flow content"]),TFOOT:new Set(["Flow content"]),COLGROUP:new Set(["Metadata content"]),TR:new Set(["Flow content"]),HEAD:new Set(["Metadata content"]),OPTGROUP:new Set(["Phrasing content"]),A:new Set(["Phrasing content"]),BUTTON:new Set(["Phrasing content"]),P:new Set(["Phrasing content"]),LI:new Set(["Flow content","Phrasing content"]),DIV:new Set(["Flow content"]),SECTION:new Set(["Flow content"]),ARTICLE:new Set(["Flow content"]),NAV:new Set(["Flow content"]),HEADER:new Set(["Flow content"]),FOOTER:new Set(["Flow content"]),ASIDE:new Set(["Flow content"]),MAIN:new Set(["Flow content"]),BLOCKQUOTE:new Set(["Flow content"]),SPAN:new Set(["Phrasing content"]),EM:new Set(["Phrasing content"]),STRONG:new Set(["Phrasing content"]),SMALL:new Set(["Phrasing content"]),MARK:new Set(["Phrasing content"]),SUB:new Set(["Phrasing content"]),SUP:new Set(["Phrasing content"])},bt={A:new Set(["A"]),BUTTON:new Set(["BUTTON"]),LABEL:new Set(["LABEL"]),FORM:new Set(["FORM"]),P:new Set(["DIV","SECTION","ARTICLE","HEADER","FOOTER","NAV","ASIDE","MAIN","TABLE","UL","OL","FORM"])},Dt={"Metadata content":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"],"Flow content":["DIV","P","UL","OL","LI","SECTION","ARTICLE","ASIDE","NAV","HEADER","FOOTER","MAIN","TABLE","FORM","FIGURE","FIGCAPTION","HR","BLOCKQUOTE","PRE"],"Sectioning content":["ARTICLE","ASIDE","NAV","SECTION"],"Heading content":["H1","H2","H3","H4","H5","H6","HGROUP"],"Phrasing content":["A","ABBR","AREA","AUDIO","B","BDI","BDO","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","MAP","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","VAR","VIDEO","WBR"],"Embedded content":["AUDIO","CANVAS","EMBED","IFRAME","IMG","MATH","OBJECT","PICTURE","SVG","VIDEO","SOURCE","TRACK"],"Interactive content":["A","AUDIO","BUTTON","DETAILS","EMBED","IFRAME","INPUT","LABEL","SELECT","TEXTAREA","VIDEO"]},Pt=(()=>{const t={};for(const[e,n]of Object.entries(Dt))for(const s of n)t[s]||(t[s]=new Set),t[s].add(e);return t})(),Bt=["LI","SCRIPT","TEMPLATE"],Ft=(t,e)=>{const n=t.toUpperCase(),s=e.toUpperCase(),o=bt[n];if(o&&o.has(s)||(n==="UL"||n==="OL")&&!Bt.includes(s))return!1;if(!h[n])return!0;const r=h[n],a=Pt[s];if(!a)return!0;for(const g of a)if(r.has(g))return!0;return!1},Ut=new Set(["button","checkbox","gridcell","link","menuitem","menuitemcheckbox","menuitemradio","option","progressbar","radio","scrollbar","searchbox","separator","slider","spinbutton","switch","tab","tabpanel","textbox","treeitem","combobox","grid","listbox","menu","menubar","radiogroup","tablist","tree","treegrid","application","article","cell","columnheader","definition","directory","document","feed","figure","group","heading","img","list","listitem","math","none","note","presentation","row","rowgroup","rowheader","separator","table","term","toolbar","tooltip","banner","complementary","contentinfo","form","main","navigation","region","search","alert","log","marquee","status","timer","alertdialog","dialog","select","selectmenu","combobox","grid","listbox","menubar","radiogroup","tablist","treegrid"]),Ht=t=>(d(t),Ut.has(t)),_t=new Set(["VIDEO","AUDIO","PICTURE","CANVAS"]),Vt=new Set(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"]),vt=t=>t instanceof Event,x=t=>(P(t),t.target),xt=t=>(P(t),t.currentTarget),Gt=t=>{let e=x(t);return e.nodeType===Node.TEXT_NODE&&(e=e.parentElement),e},kt=(t,e,n)=>{const s=Gt(t),o=f(s,J());if(o){const a=f(o,m());a&&a.remove()}const r=f(s,m());if(!o&&r){const{target:a,className:g}=te(t);Xt(a,g)}j($(e)),H(n)},$t=t=>()=>{ne(t)},Kt=(t,e,n)=>s=>{s.key==="Enter"&&k(t,e,n)};function Jt(t,e){const{type:n,todos:s}=t;n==="update"&&(e.innerHTML="",K(e,s))}const Wt=(t,e)=>{qt(t,e),Ot(e)},jt=t=>{const e=_(t);return!I(e)},qt=(t,e)=>{const n=_(e),s=G(n);U(t,s);const o=$(t);j(o)},Xt=(t,e)=>{Tt(t,e)},Yt=({text:t,checked:e})=>{const n=G(t);return e&&St(n,p()),n},G=t=>{const e=m(),n=Zt(e);return L(n,zt(t)),L(n,Qt()),n},Qt=()=>{const t=V();return F(t,J()),S(t,"×"),pt(t,"Delete task"),It(t,"button"),t},zt=t=>{const e=W(),n=V();return n.className=e,S(n,t),n},Zt=t=>{const e=At();return Ct(e,t),e},te=t=>({className:p(),target:Lt(x(t),v(m())),currentTarget:xt(t)}),ee=(t,e)=>S(t,e),ne=t=>S(t,""),k=(t,e,n)=>{jt(t)?Wt(e,t):ee(n,"Task cannot be empty"),H(t)},$=t=>Array.from(t.children,e=>({text:ft(lt(e,W())),checked:e.matches(`.${p()}`)})),K=(t,e)=>{e.forEach(n=>U(t,Yt(n)))},oe={todoButton:"[data-js-todo-btn-add]",todoInput:"[data-js-todo-new-task-input]",todoList:"[data-js-todo-list]",todoValidMessage:"[data-js-todo-error-empty-task]"},se=t=>{const e=T(t);return ot(e),e},re=t=>{const e=T(t);return E(e),e},ae=t=>{const e=T(t);return b(e),e},ce=t=>{const e=T(t);return st(e),e},{todoButton:ie,todoInput:le,todoList:de,todoValidMessage:ue}=oe,me=()=>({todoButton:se(ie),todoInput:re(le),todoList:ae(de),todoValidMessage:ce(ue)}),m=()=>{const t="todo__item";return i(t),t},p=()=>{const t="todo__item--checked";return i(t),t},J=()=>{const t="todo__remove";return i(t),t},W=()=>{const t="todo__text";return i(t),t},Ee=(t,e)=>(it(t),d(e,"key"),t.getItem(e)),Te=(t,e,n)=>{const s=Ee(t,e);return Z(s,n)},A={todo:"todoList"};function Se(t){return B(t,"broadcastChannelName (name for BroadcastChannel API)"),new BroadcastChannel(t)}const ge=()=>{const t=[],e=Te(localStorage,A.todo,t);return Array.isArray(e)?e:t},j=t=>{try{localStorage.setItem(A.todo,JSON.stringify(t)),w().postMessage({type:"update",todos:t})}catch(e){console.error("Failed to save todos:",e)}},fe=()=>{const t=[],e=A.todo;if(tt(localStorage.getItem(e)))try{localStorage.setItem(e,JSON.stringify(t)),w().postMessage({type:"update",DefaultTodos:t})}catch(n){console.error("Failed to initialize todos:",n)}};function w(){return Se("todos_channel")}const Le=()=>{const{todoButton:t,todoInput:e,todoList:n,todoValidMessage:s}=me(),o=w();fe(),o.addEventListener("message",a=>{Jt(a.data,n)});const r=ge();K(n,r),t.addEventListener("click",q(e,n,s)),n.addEventListener("click",a=>{kt(a,n,e)}),e.addEventListener("keydown",Kt(e,n,s)),e.addEventListener("input",$t(s))};window.addEventListener("DOMContentLoaded",Le,{once:!0});
