(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const q=(t,e,n)=>()=>{k(t,e,n)},C=(t,e="value")=>{ut(t)||c(t,e,"an instance of HTMLElement")},L=t=>y(t)==="",M=t=>typeof t=="string",Y=t=>M(t)?t:"",y=t=>Y(t).trim(),X=t=>R(t).slice(8,-1),R=t=>Object.prototype.toString.call(t),Q=(t,e=80)=>{let n;if(typeof t=="bigint")n=t.toString()+"n";else if(t instanceof WeakMap||t instanceof WeakSet||t instanceof Map||t instanceof Set||t instanceof Promise)n=String(t);else try{n=JSON.stringify(t)}catch{n=String(t)}return n===void 0&&(n=String(t)),n.length>e?n.slice(0,e)+"…":n},z=t=>(d(t,"raw"),JSON.parse(t)),Z=(t,e=null)=>{try{return z(t)}catch(n){return console.error("parseJSONWithFallback: Failed to parse JSON. Raw value:",t,n),e}},tt=t=>t==null,l=(t,e="value")=>{Tt(t)||c(t,e,"an instance of Element")};function et(t,e){if(t=u(t),e=u(e),!Ht(t,e))throw new Error(`Cannot nest <${e}> inside <${t}> — this is prohibited by the rules.`)}const b=(t,e="value")=>{ft(t,e)||c(t,e,"an HTMLElement that supports textContent")},i=t=>{if(d(t,"HTML class name"),L(t))throw new SyntaxError("Class name cannot be empty.");if(/\s/.test(t))throw new SyntaxError(`Class name must not contain spaces: "${t}"`);if(!/^-?[_\p{L}][_\p{L}\p{N}-]*$/u.test(t))throw new SyntaxError(`Invalid class name: "${t}". A valid class name must be a non-empty string without spaces, start with a letter, underscore (_), or hyphen (-), and contain only letters, digits, hyphens (-), and underscores (_). Examples: "header", "_hidden", "-dark-theme", "menu_item-1", "привет", "按钮".`)},N=(t,e)=>{l(t,"first argument"),at(e)},nt=t=>{if(!vt(t))throw new Error(`"${t}" is not a valid ARIA role for a DOM element (HTMLElement, SVGElement, or MathMLElement)`)},E=(t,e="value")=>{Rt(t)||c(t,e,"a DOM element of type <input>")},D=(t,e="value")=>{ht(t)||c(t,e,"a DOM element of type <ul>")},B=(t,e="value")=>{Ot(t)||c(t,e,"a DOM element of type <li>")},ot=(t,e="value")=>{Bt(t)||c(t,e,"a DOM element of type <div>")},st=(t,e="value")=>{Nt(t)||c(t,e,"a DOM element of type <button>")},rt=t=>{if(!O.includes(t))throw new TypeError(`Invalid <button> type: "${t}". Must be one of: ${O.join(", ")}`)},P=(t,e="value")=>{kt(t)||c(t,e,"an instance of Event")},at=t=>{if(d(t),L(t))throw new SyntaxError("CSS Selector cannot be an empty string.");try{document.createElement("div").querySelector(t)}catch(e){throw new SyntaxError(`Invalid CSS selector: "${t}". ${e.message}`)}},d=(t,e="value")=>{M(t)||c(t,e,"string")},U=(t,e)=>{const n=e||"value";if(d(t,n),t.trim()==="")throw new Error(`${n} must be a non-empty string, but an empty string was provided`)},c=(t,e,n)=>{const o=R(t),s=X(t),r=Q(t);throw new TypeError(`Expected ${e} to be ${n}, but received ${o} of type ${s} with value ${r}`)},ct=(t,e="localStorage")=>{t!==globalThis.localStorage&&c(t,e,"globalThis.localStorage")},it=t=>{if(!(()=>{try{const n="__test__";return t.setItem(n,"1"),t.removeItem(n),!0}catch{return!1}})())throw new Error("globalThis.localStorage is present but not usable at runtime — possibly due to browser restrictions (e.g., Safari private mode, quota exceeded, or disabled access).")},lt=t=>{ct(t),it(t)},T=t=>{d(t);const e=document.querySelector(t);return l(e),e},dt=(t,e)=>{l(t,"First argument 'root' must be a valid DOM Element."),i(e);const n=t.getElementsByClassName(e)[0];if(!n)throw new TypeError(`No element found with class name '${e}'`);return n},I=(t,e)=>(et(t,e),t.appendChild(e)),ut=t=>t instanceof HTMLElement,mt=t=>xt.has(u(t)),Et=t=>Gt.has(u(t)),Tt=t=>t instanceof Element,F=(t,e)=>{l(t,"first argument"),i(e),t.className=e},St=(t,e)=>{l(t,"first argument"),i(e),t.classList.toggle(e)},gt=(t,e)=>{l(t,"first argument"),i(e),t.classList.add(e)},S=(t,e)=>{b(t,"first argument"),d(e,"second argument"),t.textContent=e},ft=(t,e="value")=>(C(t,e),!(Et(t)||mt(t))),It=t=>(b(t),t.textContent),u=t=>(C(t,"first argument"),t.tagName),Lt=(t,e)=>(N(t,e),t.closest(e)),f=(t,e)=>{const n=v(e);return N(t,n),t.closest(n)},pt=(t,e)=>{l(t,"first argument"),nt(e),t.setAttribute("role",e)},At=(t,e)=>{l(t,"First argument of setAriaLabel (DOM element: HTMLElement, SVGElement, MathMLElement)"),U(e,"Second argument of setAriaLabel (aria-label value, must be a non-empty string)"),t.setAttribute("aria-label",e)},wt=()=>document.createElement("li"),ht=t=>t instanceof HTMLUListElement,Ot=t=>t instanceof HTMLLIElement,_=(t,e)=>{D(t,"first argument"),B(e,"second argument"),I(t,e)},Ct=(t,e)=>{B(t,"first argument"),i(e),F(t,e)},Mt=t=>{E(t),t.value=""},H=t=>{E(t),t.value="",t.focus()},yt=t=>(E(t),t.value),V=t=>y(yt(t)),Rt=t=>t instanceof HTMLInputElement,bt=()=>document.createElement("span"),Nt=t=>t instanceof HTMLButtonElement,Dt=(t="submit")=>{rt(t);const e=document.createElement("button");return e.type=t,e},Bt=t=>t instanceof HTMLDivElement,v=t=>(i(t),`.${t}`),h={UL:new Set(["Flow content","Metadata content"]),OL:new Set(["Flow content","Metadata content"]),DL:new Set(["Flow content"]),SELECT:new Set(["Phrasing content","Metadata content"]),TABLE:new Set(["Flow content"]),THEAD:new Set(["Flow content"]),TBODY:new Set(["Flow content"]),TFOOT:new Set(["Flow content"]),COLGROUP:new Set(["Metadata content"]),TR:new Set(["Flow content"]),HEAD:new Set(["Metadata content"]),OPTGROUP:new Set(["Phrasing content"]),A:new Set(["Phrasing content"]),BUTTON:new Set(["Phrasing content"]),P:new Set(["Phrasing content"]),LI:new Set(["Flow content","Phrasing content"]),DIV:new Set(["Flow content"]),SECTION:new Set(["Flow content"]),ARTICLE:new Set(["Flow content"]),NAV:new Set(["Flow content"]),HEADER:new Set(["Flow content"]),FOOTER:new Set(["Flow content"]),ASIDE:new Set(["Flow content"]),MAIN:new Set(["Flow content"]),BLOCKQUOTE:new Set(["Flow content"]),SPAN:new Set(["Phrasing content"]),EM:new Set(["Phrasing content"]),STRONG:new Set(["Phrasing content"]),SMALL:new Set(["Phrasing content"]),MARK:new Set(["Phrasing content"]),SUB:new Set(["Phrasing content"]),SUP:new Set(["Phrasing content"])},Pt={A:new Set(["A"]),BUTTON:new Set(["BUTTON"]),LABEL:new Set(["LABEL"]),FORM:new Set(["FORM"]),P:new Set(["DIV","SECTION","ARTICLE","HEADER","FOOTER","NAV","ASIDE","MAIN","TABLE","UL","OL","FORM"])},Ut={"Metadata content":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"],"Flow content":["DIV","P","UL","OL","LI","SECTION","ARTICLE","ASIDE","NAV","HEADER","FOOTER","MAIN","TABLE","FORM","FIGURE","FIGCAPTION","HR","BLOCKQUOTE","PRE"],"Sectioning content":["ARTICLE","ASIDE","NAV","SECTION"],"Heading content":["H1","H2","H3","H4","H5","H6","HGROUP"],"Phrasing content":["A","ABBR","AREA","AUDIO","B","BDI","BDO","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","MAP","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","VAR","VIDEO","WBR"],"Embedded content":["AUDIO","CANVAS","EMBED","IFRAME","IMG","MATH","OBJECT","PICTURE","SVG","VIDEO","SOURCE","TRACK"],"Interactive content":["A","AUDIO","BUTTON","DETAILS","EMBED","IFRAME","INPUT","LABEL","SELECT","TEXTAREA","VIDEO"]},Ft=(()=>{const t={};for(const[e,n]of Object.entries(Ut))for(const o of n)t[o]||(t[o]=new Set),t[o].add(e);return t})(),_t=["LI","SCRIPT","TEMPLATE"],Ht=(t,e)=>{const n=t.toUpperCase(),o=e.toUpperCase(),s=Pt[n];if(s&&s.has(o)||(n==="UL"||n==="OL")&&!_t.includes(o))return!1;if(!h[n])return!0;const r=h[n],a=Ft[o];if(!a)return!0;for(const g of a)if(r.has(g))return!0;return!1},Vt=new Set(["button","checkbox","gridcell","link","menuitem","menuitemcheckbox","menuitemradio","option","progressbar","radio","scrollbar","searchbox","separator","slider","spinbutton","switch","tab","tabpanel","textbox","treeitem","combobox","grid","listbox","menu","menubar","radiogroup","tablist","tree","treegrid","application","article","cell","columnheader","definition","directory","document","feed","figure","group","heading","img","list","listitem","math","none","note","presentation","row","rowgroup","rowheader","separator","table","term","toolbar","tooltip","banner","complementary","contentinfo","form","main","navigation","region","search","alert","log","marquee","status","timer","alertdialog","dialog","select","selectmenu","combobox","grid","listbox","menubar","radiogroup","tablist","treegrid"]),vt=t=>(d(t),Vt.has(t)),xt=new Set(["VIDEO","AUDIO","PICTURE","CANVAS"]),Gt=new Set(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"]),O=["button","submit","reset"],kt=t=>t instanceof Event,x=t=>(P(t),t.target),$t=t=>(P(t),t.currentTarget),Kt=t=>{let e=x(t);return e.nodeType===Node.TEXT_NODE&&(e=e.parentElement),e},Jt=(t,e,n)=>{const o=Kt(t),s=f(o,J());if(s){const a=f(s,m());a&&a.remove()}const r=f(o,m());if(!s&&r){const{target:a,className:g}=oe(t);zt(a,g)}W($(e)),H(n)},jt=t=>()=>{re(t)},Wt=(t,e,n)=>o=>{o.key==="Enter"&&(o.preventDefault(),k(t,e,n))};function qt(t,e){const{type:n,todos:o}=t;n==="update"&&(e.innerHTML="",K(e,o))}const Yt=(t,e)=>{Qt(t,e),Mt(e)},Xt=t=>{const e=V(t);return!L(e)},Qt=(t,e)=>{const n=V(e),o=G(n);_(t,o);const s=$(t);W(s)},zt=(t,e)=>{St(t,e)},Zt=({text:t,checked:e})=>{const n=G(t);return e&&gt(n,p()),n},G=t=>{const e=m(),n=ne(e);return I(n,ee(t)),I(n,te()),n},te=()=>{const t=Dt("button");return F(t,J()),S(t,"×"),At(t,"Delete task"),pt(t,"button"),t},ee=t=>{const e=j(),n=bt();return n.className=e,S(n,t),n},ne=t=>{const e=wt();return Ct(e,t),e},oe=t=>({className:p(),target:Lt(x(t),v(m())),currentTarget:$t(t)}),se=(t,e)=>S(t,e),re=t=>S(t,""),k=(t,e,n)=>{Xt(t)?Yt(e,t):se(n,"Task cannot be empty"),H(t)},$=t=>Array.from(t.children,e=>({text:It(dt(e,j())),checked:e.matches(`.${p()}`)})),K=(t,e)=>{e.forEach(n=>_(t,Zt(n)))},ae={todoButton:"[data-js-todo-btn-add]",todoInput:"[data-js-todo-new-task-input]",todoList:"[data-js-todo-list]",todoValidMessage:"[data-js-todo-error-empty-task]"},ce=t=>{const e=T(t);return st(e),e},ie=t=>{const e=T(t);return E(e),e},le=t=>{const e=T(t);return D(e),e},de=t=>{const e=T(t);return ot(e),e},{todoButton:ue,todoInput:me,todoList:Ee,todoValidMessage:Te}=ae,Se=()=>({todoButton:ce(ue),todoInput:ie(me),todoList:le(Ee),todoValidMessage:de(Te)}),m=()=>{const t="todo__item";return i(t),t},p=()=>{const t="todo__item--checked";return i(t),t},J=()=>{const t="todo__remove";return i(t),t},j=()=>{const t="todo__text";return i(t),t},ge=(t,e)=>(lt(t),d(e,"key"),t.getItem(e)),fe=(t,e,n)=>{const o=ge(t,e);return Z(o,n)},A={todo:"todoList"};function Ie(t){return U(t,"broadcastChannelName (name for BroadcastChannel API)"),new BroadcastChannel(t)}const Le=()=>{const t=[],e=fe(localStorage,A.todo,t);return Array.isArray(e)?e:t},W=t=>{try{localStorage.setItem(A.todo,JSON.stringify(t)),w().postMessage({type:"update",todos:t})}catch(e){console.error("Failed to save todos:",e)}},pe=()=>{const t=[],e=A.todo;if(tt(localStorage.getItem(e)))try{localStorage.setItem(e,JSON.stringify(t)),w().postMessage({type:"update",DefaultTodos:t})}catch(n){console.error("Failed to initialize todos:",n)}};function w(){return Ie("todos_channel")}const Ae=()=>{const{todoButton:t,todoInput:e,todoList:n,todoValidMessage:o}=Se(),s=w();pe(),s.addEventListener("message",a=>{qt(a.data,n)});const r=Le();K(n,r),t.addEventListener("click",q(e,n,o)),n.addEventListener("click",a=>{Jt(a,n,e)}),e.addEventListener("keydown",Wt(e,n,o)),e.addEventListener("input",jt(o))};window.addEventListener("DOMContentLoaded",Ae,{once:!0});
