(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const W=(t,e,n)=>()=>{v(t,e,n)},f=(t,e="value")=>{ct(t)||c(t,e,"an instance of HTMLElement")},A=t=>h(t)==="",O=t=>typeof t=="string",q=t=>O(t)?t:"",h=t=>q(t).trim(),j=t=>M(t).slice(8,-1),M=t=>Object.prototype.toString.call(t),X=(t,e=80)=>{let n;if(typeof t=="bigint")n=t.toString()+"n";else if(t instanceof WeakMap||t instanceof WeakSet||t instanceof Map||t instanceof Set||t instanceof Promise)n=String(t);else try{n=JSON.stringify(t)}catch{n=String(t)}return n===void 0&&(n=String(t)),n.length>e?n.slice(0,e)+"…":n},Y=t=>(l(t,"raw"),JSON.parse(t)),Q=(t,e=null)=>{try{return Y(t)}catch(n){return console.error("parseJSONWithFallback: Failed to parse JSON. Raw value:",t,n),e}},T=(t,e="value")=>{dt(t)||c(t,e,"an instance of Element")};function z(t,e){if(t=u(t),e=u(e),!yt(t,e))throw new Error(`Cannot nest <${e}> inside <${t}> — this is prohibited by the rules.`)}const Z=(t,e="value")=>{Tt(t,e)||c(t,e,"an HTMLElement that supports textContent")},i=t=>{if(l(t,"HTML class name"),A(t))throw new SyntaxError("Class name cannot be empty.");if(/\s/.test(t))throw new SyntaxError(`Class name must not contain spaces: "${t}"`);if(!/^-?[_\p{L}][_\p{L}\p{N}-]*$/u.test(t))throw new SyntaxError(`Invalid class name: "${t}". A valid class name must be a non-empty string without spaces, start with a letter, underscore (_), or hyphen (-), and contain only letters, digits, hyphens (-), and underscores (_). Examples: "header", "_hidden", "-dark-theme", "menu_item-1", "привет", "按钮".`)},R=(t,e)=>{T(t,"first argument"),nt(e)},S=(t,e="value")=>{pt(t)||c(t,e,"a DOM element of type <input>")},y=(t,e="value")=>{gt(t)||c(t,e,"a DOM element of type <ul>")},N=(t,e="value")=>{It(t)||c(t,e,"a DOM element of type <li>")},tt=(t,e="value")=>{wt(t)||c(t,e,"a DOM element of type <button>")},et=(t,e="value")=>{Ct(t)||c(t,e,"a DOM element of type <div>")},P=(t,e="value")=>{Dt(t)||c(t,e,"an instance of Event")},nt=t=>{if(l(t),A(t))throw new SyntaxError("CSS Selector cannot be an empty string.");try{document.createElement("div").querySelector(t)}catch(e){throw new SyntaxError(`Invalid CSS selector: "${t}". ${e.message}`)}},l=(t,e="value")=>{O(t)||c(t,e,"string")},ot=(t,e)=>{const n=e;if(l(t,n),t.trim()==="")throw new Error(`${n} must be a non-empty string, but an empty string was provided`)},c=(t,e,n)=>{const s=M(t),o=j(t),r=X(t);throw new TypeError(`Expected ${e} to be ${n}, but received ${s} of type ${o} with value ${r}`)},st=(t,e="localStorage")=>{t!==globalThis.localStorage&&c(t,e,"globalThis.localStorage")},rt=t=>{if(!(()=>{try{const n="__test__";return t.setItem(n,"1"),t.removeItem(n),!0}catch{return!1}})())throw new Error("globalThis.localStorage is present but not usable at runtime — possibly due to browser restrictions (e.g., Safari private mode, quota exceeded, or disabled access).")},at=t=>{st(t),rt(t)},m=t=>{l(t);const e=document.querySelector(t);return f(e),e},L=(t,e)=>(z(t,e),t.appendChild(e)),ct=t=>t instanceof HTMLElement,it=t=>Nt.has(u(t)),lt=t=>Pt.has(u(t)),dt=t=>t instanceof Element,D=(t,e)=>{T(t,"first argument"),i(e),t.className=e},ut=(t,e)=>{T(t,"first argument"),i(e),t.classList.toggle(e)},Et=(t,e)=>{T(t,"first argument"),i(e),t.classList.add(e)},g=(t,e)=>{Z(t,"first argument"),l(e,"second argument"),t.textContent=e},Tt=(t,e="value")=>(f(t,e),!(lt(t)||it(t))),u=t=>(f(t,"first argument"),t.tagName),St=(t,e)=>(R(t,e),t.closest(e)),I=(t,e)=>{const n=H(e);return R(t,n),t.closest(n)},mt=()=>document.createElement("li"),gt=t=>t instanceof HTMLUListElement,It=t=>t instanceof HTMLLIElement,B=(t,e)=>{y(t,"first argument"),N(e,"second argument"),L(t,e)},Lt=(t,e)=>{N(t,"first argument"),i(e),D(t,e)},ft=t=>{S(t),t.value=""},_=t=>{S(t),t.value="",t.focus()},At=t=>(S(t),t.value),U=t=>h(At(t)),pt=t=>t instanceof HTMLInputElement,F=()=>document.createElement("span"),wt=t=>t instanceof HTMLButtonElement,Ct=t=>t instanceof HTMLDivElement,H=t=>(i(t),`.${t}`),w={UL:new Set(["Flow content","Metadata content"]),OL:new Set(["Flow content","Metadata content"]),DL:new Set(["Flow content"]),SELECT:new Set(["Phrasing content","Metadata content"]),TABLE:new Set(["Flow content"]),THEAD:new Set(["Flow content"]),TBODY:new Set(["Flow content"]),TFOOT:new Set(["Flow content"]),COLGROUP:new Set(["Metadata content"]),TR:new Set(["Flow content"]),HEAD:new Set(["Metadata content"]),OPTGROUP:new Set(["Phrasing content"]),A:new Set(["Phrasing content"]),BUTTON:new Set(["Phrasing content"]),P:new Set(["Phrasing content"]),LI:new Set(["Flow content","Phrasing content"]),DIV:new Set(["Flow content"]),SECTION:new Set(["Flow content"]),ARTICLE:new Set(["Flow content"]),NAV:new Set(["Flow content"]),HEADER:new Set(["Flow content"]),FOOTER:new Set(["Flow content"]),ASIDE:new Set(["Flow content"]),MAIN:new Set(["Flow content"]),BLOCKQUOTE:new Set(["Flow content"]),SPAN:new Set(["Phrasing content"]),EM:new Set(["Phrasing content"]),STRONG:new Set(["Phrasing content"]),SMALL:new Set(["Phrasing content"]),MARK:new Set(["Phrasing content"]),SUB:new Set(["Phrasing content"]),SUP:new Set(["Phrasing content"])},Ot={A:new Set(["A"]),BUTTON:new Set(["BUTTON"]),LABEL:new Set(["LABEL"]),FORM:new Set(["FORM"]),P:new Set(["DIV","SECTION","ARTICLE","HEADER","FOOTER","NAV","ASIDE","MAIN","TABLE","UL","OL","FORM"])},ht={"Metadata content":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"],"Flow content":["DIV","P","UL","OL","LI","SECTION","ARTICLE","ASIDE","NAV","HEADER","FOOTER","MAIN","TABLE","FORM","FIGURE","FIGCAPTION","HR","BLOCKQUOTE","PRE"],"Sectioning content":["ARTICLE","ASIDE","NAV","SECTION"],"Heading content":["H1","H2","H3","H4","H5","H6","HGROUP"],"Phrasing content":["A","ABBR","AREA","AUDIO","B","BDI","BDO","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","MAP","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","VAR","VIDEO","WBR"],"Embedded content":["AUDIO","CANVAS","EMBED","IFRAME","IMG","MATH","OBJECT","PICTURE","SVG","VIDEO","SOURCE","TRACK"],"Interactive content":["A","AUDIO","BUTTON","DETAILS","EMBED","IFRAME","INPUT","LABEL","SELECT","TEXTAREA","VIDEO"]},Mt=(()=>{const t={};for(const[e,n]of Object.entries(ht))for(const s of n)t[s]||(t[s]=new Set),t[s].add(e);return t})(),Rt=["LI","SCRIPT","TEMPLATE"],yt=(t,e)=>{const n=t.toUpperCase(),s=e.toUpperCase(),o=Ot[n];if(o&&o.has(s)||(n==="UL"||n==="OL")&&!Rt.includes(s))return!1;if(!w[n])return!0;const r=w[n],a=Mt[s];if(!a)return!0;for(const d of a)if(r.has(d))return!0;return!1},Nt=new Set(["VIDEO","AUDIO","PICTURE","CANVAS"]),Pt=new Set(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"]),Dt=t=>t instanceof Event,b=t=>(P(t),t.target),Bt=t=>(P(t),t.currentTarget),_t=t=>{let e=b(t);return e.nodeType===Node.TEXT_NODE&&(e=e.parentElement),e},Ut=(t,e,n)=>{const s=_t(t),o=I(s,G());if(o){const a=I(o,E());a&&a.remove()}const r=I(s,E());if(!o&&r){const{target:a,className:d}=Jt(t);xt(a,d)}$(x(e)),_(n)},Ft=t=>()=>{qt(t)},Ht=(t,e,n)=>s=>{s.key==="Enter"&&v(t,e,n)},bt=(t,e)=>{vt(t,e),ft(e)},Vt=t=>{const e=U(t);return!A(e)},vt=(t,e)=>{const n=U(e),s=V(n);B(t,s);const o=x(t);$(o)},xt=(t,e)=>{ut(t,e)},Gt=({text:t,checked:e})=>{const n=V(t);return e&&Et(n,p()),n},V=t=>{const e=E(),n=Kt(e);return L(n,$t(t)),L(n,kt()),n},kt=()=>{const t=F();return D(t,G()),g(t,"×"),t.setAttribute("aria-label","Delete task"),t.setAttribute("role","button"),t},$t=t=>{const e=se(),n=F();return n.className=e,g(n,t),n},Kt=t=>{const e=mt();return Lt(e,t),e},Jt=t=>({className:p(),target:St(b(t),H(E())),currentTarget:Bt(t)}),Wt=(t,e)=>g(t,e),qt=t=>g(t,""),v=(t,e,n)=>{Vt(t)?bt(e,t):Wt(n,"Task cannot be empty"),_(t)},x=t=>Array.from(t.children,e=>({text:e.querySelector(".todo__text").textContent,checked:e.matches(`.${p()}`)})),C=(t,e)=>{e.forEach(n=>B(t,Gt(n)))},jt={todoButton:".todo__btn",todoInput:".todo__input",todoList:".todo__list",todoValidMessage:".todo__error"},Xt=t=>{const e=m(t);return tt(e),e},Yt=t=>{const e=m(t);return S(e),e},Qt=t=>{const e=m(t);return y(e),e},zt=t=>{const e=m(t);return et(e),e},{todoButton:Zt,todoInput:te,todoList:ee,todoValidMessage:ne}=jt,oe=()=>({todoButton:Xt(Zt),todoInput:Yt(te),todoList:Qt(ee),todoValidMessage:zt(ne)}),E=()=>{const t="todo__item";return i(t),t},p=()=>{const t="todo__item--checked";return i(t),t},G=()=>{const t="todo__remove";return i(t),t},se=()=>{const t="todo__text";return i(t),t},re=(t,e)=>(at(t),l(e,"key"),t.getItem(e)),ae=(t,e,n)=>{const s=re(t,e);return Q(s,n)},k={todo:"todoList"};function ce(t){return ot(t,"broadcastChannelName (name for BroadcastChannel API)"),new BroadcastChannel(t)}const ie=()=>{const t=[],e=ae(localStorage,k.todo,t);return Array.isArray(e)?e:t},$=t=>{try{localStorage.setItem(k.todo,JSON.stringify(t)),K().postMessage({type:"update",todos:t})}catch(e){console.error("Failed to save todos:",e)}};function K(){return ce("todos_channel")}const le=()=>{const{todoButton:t,todoInput:e,todoList:n,todoValidMessage:s}=oe();K().addEventListener("message",a=>{const{type:d,todos:J}=a.data;d==="update"&&(n.innerHTML="",C(n,J))});const r=ie();C(n,r),t.addEventListener("click",W(e,n,s)),n.addEventListener("click",a=>{Ut(a,n,e)}),e.addEventListener("keydown",Ht(e,n,s)),e.addEventListener("input",Ft(s))};window.addEventListener("DOMContentLoaded",le,{once:!0});
