(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const $=(t,e,n)=>()=>{M(t,e,n)},i=(t,e="value")=>{G(t)||a(t,e,"an instance of HTMLElement")},f=t=>I(t)==="",y=t=>typeof t=="string",k=t=>y(t)?t:"",I=t=>k(t).trim(),x=t=>S(t).slice(8,-1),S=t=>Object.prototype.toString.call(t),D=t=>(c(t,"raw"),JSON.parse(t)),H=(t,e=null)=>{try{return D(t)}catch(n){return console.error("parseJSONWithFallback: Failed to parse JSON. Raw value:",t,n),e}},g=(t,e="value")=>{Et(t)||a(t,e,"an instance of Node")},R=(t,e="value")=>{tt(t,e)||a(t,e,"an HTMLElement that supports textContent")},P=(t,e)=>{g(t,"first argument - ParentNode"),g(e,"second argument - ChildNode");const n=t.contains(e);return n||a(e,`${l(t)}.contains(${l(e)})`,`a child element contained in ${l(t)}`),n},U=(t,e)=>{g(t,"first argument"),c(e,"second argument");const n=t.closest(e);return F(n,`${l(t)}.closest result`,`an Element matching selector "${e}"`),n},h=t=>{if(c(t),f(t))throw new SyntaxError("Class name cannot be empty.");if(/\s/.test(t))throw new SyntaxError(`Class name must not contain spaces: "${t}"`);if(!/^[a-zA-Z_][\w-]*$/.test(t))throw new SyntaxError(`Invalid class name: "${t}". A valid class name must start with a letter or underscore, and may only contain letters, digits, hyphens (-), and underscores (_).`)},T=(t,e="value")=>{dt(t)||a(t,e,"a DOM element of type <input>")},B=(t,e="value")=>{st(t)||a(t,e,"a DOM element of type <ul>")},p=(t,e="value")=>{rt(t)||a(t,e,"a DOM element of type <li>")},C=(t,e="value")=>{ft(t)||a(t,e,"an instance of Event")},J=t=>{if(c(t),f(t))throw new SyntaxError("Selector cannot be an empty string.");try{document.createElement("div").querySelector(t)}catch(e){throw new SyntaxError(`Invalid CSS selector: "${t}". ${e.message}`)}},K=t=>{if(J(t),!t.startsWith("."))throw new SyntaxError('Selector must start with "."')},c=(t,e="value")=>{y(t)||a(t,e,"string")},F=(t,e="value",n="a non-null and non-undefined value")=>{t==null&&a(t,e,n)},a=(t,e,n)=>{const o=S(t),s=x(t);throw new TypeError(`Expected ${e} to be ${n}, but received ${o} of type ${s}`)},W=(t,e="localStorage")=>{t!==globalThis.localStorage&&a(t,e,"globalThis.localStorage")},j=t=>{if(!(()=>{try{const n="__test__";return t.setItem(n,"1"),t.removeItem(n),!0}catch{return!1}})())throw new Error("globalThis.localStorage is present but not usable at runtime — possibly due to browser restrictions (e.g., Safari private mode, quota exceeded, or disabled access).")},q=t=>{W(t),j(t)},u=t=>{c(t);const e=document.querySelector(t);return i(e),e},l=t=>{const e=E(t),n=t.id?`#${t.id}`:"",o=t.classList.length?"."+Array.from(t.classList).join("."):"";return`<${e}${n}${o}>`},G=t=>t instanceof HTMLElement,z=t=>Y.has(E(t)),X=t=>Z.has(E(t)),Y=new Set(["VIDEO","AUDIO","PICTURE","CANVAS"]),Z=new Set(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"]),v=(t,e)=>{i(t,"first argument"),c(e,"second argument"),t.className=e},Q=(t,e)=>{i(t,"first argument"),c(e,"second argument"),t.classList.toggle(e)},d=(t,e)=>{R(t,"first argument"),c(e,"second argument"),t.textContent=e},tt=(t,e="value")=>(i(t,e),!(X(t)||z(t))),E=t=>(i(t,"first argument"),t.tagName),et=(t,e)=>U(t,e),nt=(t,e)=>P(t,e),ot=()=>document.createElement("li"),st=t=>t instanceof HTMLUListElement,rt=t=>t instanceof HTMLLIElement,_=(t,e)=>{B(t,"first argument"),p(e,"second argument"),t.appendChild(e)},at=(t,e)=>{p(t,"first argument"),d(t,e)},ct=(t,e)=>{p(t,"first argument"),c(e,"second argument"),v(t,e)},it=t=>{T(t),t.value=""},lt=t=>{T(t),t.value="",t.focus()},ut=t=>(T(t),t.value),w=t=>I(ut(t)),dt=t=>t instanceof HTMLInputElement,mt=()=>document.createElement("span"),gt=t=>(K(t),t),ft=t=>t instanceof Event,Tt=t=>(C(t),t.target),pt=t=>(C(t),t.currentTarget),Et=t=>t instanceof Node,Lt=t=>{const{target:e,currentTarget:n,className:o}=bt(t);nt(n,e),_t(e,o)},yt=t=>{const e=t.target;if(!e.classList.contains("todo__item--remove"))return;const n=e.closest(".todo__item");n&&n.parentElement&&n.parentElement.removeChild(n);const o=O(),s=A(o);V(s)},It=t=>()=>{At(t)},St=(t,e,n)=>o=>{o.key==="Enter"&&M(t,e,n)},ht=(t,e)=>{vt(t,e),it(e)},Ct=t=>{const e=w(t);return!f(e)},vt=(t,e)=>{const n=w(e),o=b(n);_(t,o);const s=A(t);V(s)},_t=(t,e)=>{Q(t,e)},b=(t,e="todo__item")=>{const n=ot();ct(n,e),at(n,t);const o=wt();return n.appendChild(o),n},wt=()=>{const t=mt();return v(t,kt()),d(t,"×"),t.setAttribute("aria-label","Delete task"),t.setAttribute("role","button"),t},bt=t=>({selector:L(),className:$t(),target:et(Tt(t),L()),currentTarget:pt(t)}),Mt=(t,e)=>d(t,e),At=t=>d(t,""),M=(t,e,n)=>{Ct(t)?ht(e,t):Mt(n,"Task cannot be empty"),lt(t)},A=t=>Array.from(t.children).map(e=>{const n=e.firstChild;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.textContent.trim():""}),Ot=()=>u(".todo__btn"),Nt=()=>u(".todo__input"),O=()=>u(".todo__list"),Vt=()=>u(".todo__error"),L=()=>gt(".todo__item"),$t=()=>{const t="todo__item--checked";return h(t),t},kt=()=>{const t="todo__item--remove";return h(t),t},xt=(t,e)=>(q(t),c(e,"key"),t.getItem(e)),Dt=(t,e,n)=>{const o=xt(t,e);return H(o,n)},N={todo:"todoList"},Ht=()=>{const t=[],e=Dt(localStorage,N.todo,t);return Array.isArray(e)?e:t},V=t=>{try{localStorage.setItem(N.todo,JSON.stringify(t))}catch(e){console.error("Failed to save todos:",e)}},Rt=()=>{const t=Nt(),e=O(),n=Ot(),o=Vt();Ht().forEach(r=>_(e,b(r))),n.addEventListener("click",$(t,e,o)),e.addEventListener("click",r=>{Lt(r),yt(r)}),t.addEventListener("keydown",St(t,e,o)),t.addEventListener("input",It(o))};window.addEventListener("DOMContentLoaded",Rt);
